(this.webpackJsonpchatapp=this.webpackJsonpchatapp||[]).push([[0],{131:function(e,t,c){},132:function(e,t,c){},133:function(e,t,c){},134:function(e,t,c){},136:function(e,t,c){"use strict";c.r(t);var a=c(2),s=c.n(a),n=c(77),i=c.n(n),r=(c(96),c(26)),j=c(10),o=(c(97),c(98),c.p+"static/media/rick.59f2f343.png"),b=c(84),d=c.n(b),l=c(85),h=c.n(l),u=c(154),m=c(155),O=c(151),p=(c(99),c(38)),f=c(3),x=function(e){var t=e.room,c=Object(a.useState)(""),s=Object(j.a)(c,2),n=s[0],i=s[1],r=t._id;return Object(a.useEffect)((function(){i(Math.floor(5e3*Math.random()))}),[]),Object(f.jsx)(p.b,{to:"/room/".concat(r),children:Object(f.jsxs)("div",{className:"sidebarchat",children:[Object(f.jsx)(u.a,{src:"https://avatars.dicebear.com/api/human/".concat(n,".svg")}),Object(f.jsxs)("div",{className:"sidebarchat_info",children:[Object(f.jsx)("h2",{children:t.name}),Object(f.jsx)("p",{children:"Click to enter"})]})]})})},g=c(82),v=c.n(g).a.create({baseURL:"https://chathighback-end.herokuapp.com/"}),N=c(58),_=(N.a.initializeApp({apiKey:"AIzaSyDb7nxWdphsye42IpkLkwNL8glmZXDFUvI",authDomain:"chatapp-71aa1.firebaseapp.com",projectId:"chatapp-71aa1",storageBucket:"chatapp-71aa1.appspot.com",messagingSenderId:"1017831714557",appId:"1:1017831714557:web:127905e0bcd01142671894",measurementId:"G-3Z2GJJD1GX"}),N.a.auth()),S=new N.a.auth.GoogleAuthProvider,y=function(e){var t=e.rooms,c=e.user,a=e.setUser;return Object(f.jsxs)("div",{className:"Sidebar",children:[Object(f.jsxs)("div",{className:"sidebar_header",children:[Object(f.jsx)("div",{className:"sidebar_headerleft",children:Object(f.jsx)(u.a,{src:c?c.photoURL:o})}),Object(f.jsxs)("div",{className:"sidebar_headerright",children:[Object(f.jsxs)("h2",{children:[Object(f.jsx)("span",{children:"Welcome"}),Object(f.jsxs)("span",{children:[c?c.displayName:"GUEST","!!!"]})]}),Object(f.jsx)(m.a,{onClick:function(){var e=prompt("Enter your room name");e&&v.post("/rooms/new",{name:e})},children:Object(f.jsx)(d.a,{})}),Object(f.jsx)(m.a,{onClick:function(){_.signOut().then((function(){a(null)}))},children:Object(f.jsx)(h.a,{})})]})]}),Object(f.jsx)("div",{className:"sidebar_search",children:Object(f.jsxs)("div",{className:"sidebar_searchcontainer",children:[Object(f.jsx)(O.a,{}),Object(f.jsx)("input",{placeholder:"Search or start a new chat",type:"text"})]})}),Object(f.jsx)("div",{className:"sidebar_chats",children:t.map((function(e){return Object(f.jsx)(x,{room:e},e._id)}))})]})},k=(c(131),c(86)),w=c.n(k),E=c(87),I=c.n(E),C=(c(132),function(e){var t=e.name,c=e.message,a=e.timeStamp,s=(e.received,e.username);return Object(f.jsx)("div",{children:Object(f.jsxs)("p",{className:t===s?"reciver_message message":"message",children:[Object(f.jsx)("span",{className:"sendby",children:t}),c,Object(f.jsx)("span",{className:"time",children:a})]})})}),U=c(14);var D=function(e){var t=e.messages,c=e.user,s=Object(a.useState)(""),n=Object(j.a)(s,2),i=n[0],r=n[1],o=Object(a.useState)(""),b=Object(j.a)(o,2),d=b[0],l=b[1],h=Object(a.useState)(""),O=Object(j.a)(h,2),p=O[0],x=O[1],g=Object(a.useState)([]),N=Object(j.a)(g,2),_=N[0],S=N[1],y=Object(U.f)().roomid;Object(a.useEffect)((function(){l(Math.floor(5e3*Math.random()))}),[y]),Object(a.useEffect)((function(){console.log(y),y&&v.get("/getroomname",{params:{roomid:y}}).then((function(e){var t=e.data.name;console.log(t),x(t)}))}),[y]),Object(a.useEffect)((function(){v.get("/getroommessages",{params:{roomid:y}}).then((function(e){var t=e.data;console.log(t),S(t)}))}),[y,t]);var k=function(e){console.log(e.target.value),e.preventDefault(),r(e.target.value),v.post("/messages/new",{message:i,name:c.displayName,timeStamp:Date(),received:!1,roomID:y}),r("")};return Object(f.jsxs)("div",{className:"Chatbody",children:[Object(f.jsxs)("div",{className:"chat_header",children:[Object(f.jsx)(u.a,{src:"https://avatars.dicebear.com/api/human/".concat(d,".svg")}),Object(f.jsxs)("div",{className:"chat_header_info",children:[Object(f.jsx)("h2",{children:p}),Object(f.jsx)("p",{children:"last seen at \n             ".concat(0!=_.length&&_?_[_.length-1].timeStamp:" ...")})]})]}),Object(f.jsx)("div",{className:"chatfield",children:_.map((function(e){var t=e.name,a=e.message,s=e.timeStamp,n=e.received,i=e._id;return Object(f.jsx)(C,{name:t,message:a,timeStamp:s,received:n,username:c.displayName},i)}))}),Object(f.jsxs)("div",{className:"chat_footer",children:[Object(f.jsx)(m.a,{children:Object(f.jsx)(w.a,{})}),Object(f.jsxs)("form",{onSubmit:k,children:[Object(f.jsx)("input",{value:i,onChange:function(e){return r(e.target.value)},placeholder:"your message"}),Object(f.jsx)(m.a,{onClick:k,children:Object(f.jsx)(I.a,{})})]})]})]})},G=c.p+"static/media/logo.c78eb1b7.png",L=(c(133),function(){return Object(f.jsx)("div",{className:"header",children:Object(f.jsxs)("div",{className:"logo_heading",children:[Object(f.jsx)("img",{className:"logo",src:G,alt:""}),Object(f.jsx)("h1",{children:"CHAT HIGH"})]})})}),A=c(68),H=c.n(A),J=(c(134),c(156)),M=function(e){var t=e.setUser;return Object(f.jsx)("div",{className:"login",children:Object(f.jsxs)("div",{className:"login_container",children:[Object(f.jsx)("img",{src:G,alt:""}),Object(f.jsx)("div",{className:"login_text",children:Object(f.jsx)("h1",{children:"Login to Chat High"})}),Object(f.jsx)(J.a,{type:"submit",onClick:function(){_.signInWithPopup(S).then((function(e){console.log(e.user),t(e.user)})).catch((function(e){alert(e)}))},children:"Sign in with Google"})]})})};var W=function(){var e=Object(a.useState)([]),t=Object(j.a)(e,2),c=t[0],s=t[1],n=Object(a.useState)([]),i=Object(j.a)(n,2),o=i[0],b=i[1],d=Object(a.useState)(null),l=Object(j.a)(d,2),h=l[0],u=l[1];return Object(a.useEffect)((function(){v.get("/messages/sync").then((function(e){s(e.data)}))}),[]),Object(a.useEffect)((function(){var e=new H.a("908f2c6e588790ab9537",{cluster:"ap2"}).subscribe("messages");return e.bind("inserted",(function(e){s([].concat(Object(r.a)(c),[e]))})),function(){e.unbind_all(),e.unsubscribe()}}),[c]),Object(a.useEffect)((function(){v.get("/rooms/sync").then((function(e){b(e.data)}))}),[]),Object(a.useEffect)((function(){var e=new H.a("908f2c6e588790ab9537",{cluster:"ap2"}).subscribe("rooms");return e.bind("inserted",(function(e){b([].concat(Object(r.a)(o),[e]))})),function(){e.unbind_all(),e.unsubscribe()}}),[o]),Object(f.jsx)(p.a,{children:h?Object(f.jsxs)(U.c,{children:[Object(f.jsxs)(U.a,{exact:!0,path:"/",children:[Object(f.jsx)(L,{}),Object(f.jsx)("div",{className:"app",children:Object(f.jsx)("div",{className:"app_body",children:Object(f.jsx)(y,{rooms:o,user:h})})})]}),Object(f.jsxs)(U.a,{path:"/room/:roomid",children:[Object(f.jsx)(L,{}),Object(f.jsx)("div",{className:"app",children:Object(f.jsxs)("div",{className:"app_body",children:[Object(f.jsx)(y,{rooms:o,user:h,setUser:u}),Object(f.jsx)(D,{messages:c,user:h})]})})]})]}):Object(f.jsx)(M,{setUser:u})})};i.a.render(Object(f.jsx)(s.a.Fragment,{children:Object(f.jsx)(W,{})}),document.getElementById("root"))},96:function(e,t,c){},97:function(e,t,c){},98:function(e,t,c){},99:function(e,t,c){}},[[136,1,2]]]);
//# sourceMappingURL=main.288b9432.chunk.js.map