{"version":3,"sources":["rick.png","Sidebarchat.js","axios.js","firebase.js","sidebar.js","Chat.js","chatbody.js","logo.png","Header.js","Login.js","App.js","index.js"],"names":["Sidebarchat","room","useState","seed","setSeed","roomid","_id","useEffect","Math","floor","random","to","className","Avatar","src","name","instance","axios","create","baseURL","auth","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","provider","GoogleAuthProvider","Sidebar","rooms","user","setUser","photoURL","rick","displayName","IconButton","onClick","roomName","prompt","post","signOut","then","SearchOutlined","placeholder","type","map","Chat","message","timeStamp","username","received","Chatbody","messages","input","setInput","setRoomName","roomMessages","setRoomMessages","useParams","console","log","get","params","res","rmn","data","mess","handleSubmit","e","target","value","preventDefault","Date","roomID","length","onSubmit","onChange","Header","logo","alt","Login","Button","signInWithPopup","result","catch","error","alert","App","setMessages","setRooms","channel","Pusher","cluster","subscribe","bind","unbind_all","unsubscribe","exact","path","ReactDOM","render","Fragment","document","getElementById"],"mappings":"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","file":"static/js/main.288b9432.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/rick.59f2f343.png\";","import { useState, useEffect } from \"react\";\nimport { Avatar } from \"@mui/material\";\nimport \"./Sidebarchat.css\";\nimport { Link } from \"react-router-dom\";\n\nconst Sidebarchat = ({ room }) => {\n  const [seed, setSeed] = useState(\"\");\n  const roomid = room._id;\n  useEffect(() => {\n    setSeed(Math.floor(Math.random() * 5000));\n  }, []);\n\n  return (\n    <Link to={`/room/${roomid}`}>\n      <div className=\"sidebarchat\">\n        <Avatar src={`https://avatars.dicebear.com/api/human/${seed}.svg`} />\n        <div className=\"sidebarchat_info\">\n          <h2>{room.name}</h2>\n          <p>Click to enter</p>\n        </div>\n      </div>\n    </Link>\n  );\n};\n\nexport default Sidebarchat;\n","import axios from \"axios\";\n\nconst instance = axios.create({\n  baseURL: \"https://chathighback-end.herokuapp.com/\",\n});\n\nexport default instance;\n","import firebase from \"firebase\";\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyDb7nxWdphsye42IpkLkwNL8glmZXDFUvI\",\n  authDomain: \"chatapp-71aa1.firebaseapp.com\",\n  projectId: \"chatapp-71aa1\",\n  storageBucket: \"chatapp-71aa1.appspot.com\",\n  messagingSenderId: \"1017831714557\",\n  appId: \"1:1017831714557:web:127905e0bcd01142671894\",\n  measurementId: \"G-3Z2GJJD1GX\",\n};\n\nconst firebaseApp = firebase.initializeApp(firebaseConfig);\nconst auth = firebase.auth();\nconst provider = new firebase.auth.GoogleAuthProvider();\n\nexport { auth, provider };\n","import { useState } from \"react\";\nimport \"./sidebar.css\";\nimport rick from \"./rick.png\";\nimport ChatIcon from \"@mui/icons-material/Chat\";\nimport LogoutIcon from \"@mui/icons-material/Logout\";\nimport { IconButton, Avatar } from \"@mui/material\";\nimport { SearchOutlined } from \"@mui/icons-material\";\nimport Sidebarchat from \"./Sidebarchat\";\nimport axios from \"./axios\";\nimport { auth } from \"./firebase\";\n\nconst Sidebar = ({ rooms, user, setUser }) => {\n  const logout = () => {\n    auth.signOut().then(() => {\n      setUser(null);\n    });\n  };\n  const handleclick = () => {\n    const roomName = prompt(\"Enter your room name\");\n    //console.log(roomName);\n    // go and make a post request of this name\n    if (roomName) {\n      axios.post(\"/rooms/new\", {\n        name: roomName,\n      });\n    }\n  };\n  return (\n    <div className=\"Sidebar\">\n      <div className=\"sidebar_header\">\n        <div className=\"sidebar_headerleft\">\n          <Avatar src={user ? user.photoURL : rick} />\n        </div>\n        <div className=\"sidebar_headerright\">\n          <h2>\n            <span>Welcome</span>\n            <span>{user ? user.displayName : \"GUEST\"}!!!</span>\n          </h2>\n          <IconButton onClick={handleclick}>\n            <ChatIcon />\n          </IconButton>\n          <IconButton onClick={logout}>\n            <LogoutIcon />\n          </IconButton>\n        </div>\n      </div>\n      <div className=\"sidebar_search\">\n        <div className=\"sidebar_searchcontainer\">\n          <SearchOutlined />\n          <input placeholder=\"Search or start a new chat\" type=\"text\" />\n        </div>\n      </div>\n      <div className=\"sidebar_chats\">\n        {rooms.map((room) => {\n          return <Sidebarchat key={room._id} room={room} />;\n        })}\n      </div>\n    </div>\n  );\n};\n\nexport default Sidebar;\n","import React from \"react\";\nimport \"./Chat.css\";\n\nconst Chat = ({ name, message, timeStamp, received, username }) => {\n  //console.log(name, message, timeStamp, received);\n  return (\n    <div>\n      <p className={name === username ? \"reciver_message message\" : \"message\"}>\n        <span className=\"sendby\">{name}</span>\n        {message}\n        <span className=\"time\">{timeStamp}</span>\n      </p>\n    </div>\n  );\n};\n\nexport default Chat;\n","import React, { useState, useEffect } from \"react\";\nimport \"./chatbody.css\";\nimport { Avatar, IconButton } from \"@mui/material\";\nimport InsertEmoticonIcon from \"@mui/icons-material/InsertEmoticon\";\nimport SendIcon from \"@mui/icons-material/Send\";\nimport Chat from \"./Chat\";\nimport axios from \"./axios\";\nimport { useParams } from \"react-router-dom\";\nfunction Chatbody({ messages, user }) {\n  const [input, setInput] = useState(\"\");\n  const [seed, setSeed] = useState(\"\");\n  const [roomName, setRoomName] = useState(\"\");\n  const [roomMessages, setRoomMessages] = useState([]);\n  const { roomid } = useParams();\n\n  useEffect(() => {\n    setSeed(Math.floor(Math.random() * 5000));\n  }, [roomid]);\n\n  useEffect(() => {\n    console.log(roomid);\n    if (roomid) {\n      //go and fire a get request in my db to get name corresponding to my roomid\n      axios.get(\"/getroomname\", { params: { roomid: roomid } }).then((res) => {\n        const rmn = res.data.name;\n        console.log(rmn);\n        setRoomName(rmn);\n      });\n    }\n  }, [roomid]);\n\n  useEffect(() => {\n    axios\n      .get(\"/getroommessages\", { params: { roomid: roomid } })\n      .then((res) => {\n        const mess = res.data;\n        console.log(mess);\n        setRoomMessages(mess);\n      });\n  }, [roomid, messages]);\n\n  const handleSubmit = (e) => {\n    console.log(e.target.value);\n    e.preventDefault();\n    setInput(e.target.value);\n    axios.post(\"/messages/new\", {\n      message: input,\n      name: user.displayName,\n      timeStamp: Date(),\n      received: false,\n      roomID: roomid,\n    });\n    setInput(\"\");\n  };\n  return (\n    <div className=\"Chatbody\">\n      <div className=\"chat_header\">\n        <Avatar src={`https://avatars.dicebear.com/api/human/${seed}.svg`} />\n        <div className=\"chat_header_info\">\n          <h2>{roomName}</h2>\n          <p>\n            {`last seen at \n             ${\n               roomMessages.length != 0 && roomMessages\n                 ? roomMessages[roomMessages.length - 1].timeStamp\n                 : \" ...\"\n             }`}\n          </p>\n        </div>\n      </div>\n      <div className=\"chatfield\">\n        {roomMessages.map(({ name, message, timeStamp, received, _id }) => {\n          //console.log(name, message, timeStamp, received);\n          return (\n            <Chat\n              key={_id}\n              name={name}\n              message={message}\n              timeStamp={timeStamp}\n              received={received}\n              username={user.displayName}\n            />\n          );\n        })}\n      </div>\n      <div className=\"chat_footer\">\n        <IconButton>\n          <InsertEmoticonIcon />\n        </IconButton>\n        <form onSubmit={handleSubmit}>\n          <input\n            value={input}\n            onChange={(e) => setInput(e.target.value)}\n            placeholder=\"your message\"\n          />\n          <IconButton onClick={handleSubmit}>\n            <SendIcon />\n          </IconButton>\n        </form>\n      </div>\n    </div>\n  );\n}\n\nexport default Chatbody;\n","export default __webpack_public_path__ + \"static/media/logo.c78eb1b7.png\";","import React from \"react\";\nimport logo from \"./logo.png\";\nimport \"./Header.css\";\n\nconst Header = () => {\n  return (\n    <div className=\"header\">\n      <div className=\"logo_heading\">\n        <img className=\"logo\" src={logo} alt=\"\" />\n        <h1>CHAT HIGH</h1>\n      </div>\n    </div>\n  );\n};\n\nexport default Header;\n","import React from \"react\";\nimport \"./Login.css\";\nimport logo from \"./logo.png\";\nimport { Button } from \"@mui/material\";\nimport { auth, provider } from \"./firebase.js\";\nimport { useHistory } from \"react-router-dom\";\n\nconst Login = ({ setUser }) => {\n  const signin = () => {\n    auth\n      .signInWithPopup(provider)\n      .then((result) => {\n        console.log(result.user);\n        setUser(result.user);\n      })\n      .catch((error) => {\n        alert(error);\n      });\n  };\n\n  return (\n    <div className=\"login\">\n      <div className=\"login_container\">\n        <img src={logo} alt=\"\" />\n        <div className=\"login_text\">\n          <h1>Login to Chat High</h1>\n        </div>\n        <Button type=\"submit\" onClick={signin}>\n          Sign in with Google\n        </Button>\n      </div>\n    </div>\n  );\n};\n\nexport default Login;\n","import { useState, useEffect } from \"react\";\nimport \"./App.css\";\nimport Sidebar from \"./sidebar\";\nimport Chatbody from \"./chatbody\";\nimport Header from \"./Header\";\nimport Pusher from \"pusher-js\";\nimport axios from \"./axios\";\nimport Login from \"./Login\";\nimport { BrowserRouter as Router, Switch, Route, Link } from \"react-router-dom\";\n\nfunction App() {\n  const [messages, setMessages] = useState([]);\n  const [rooms, setRooms] = useState([]);\n  const [user, setUser] = useState(null);\n\n  //fetch messages\n  useEffect(() => {\n    axios.get(\"/messages/sync\").then((res) => {\n      //console.log(res.data);\n      setMessages(res.data);\n    });\n  }, []);\n\n  //whenever we post a message pusher changes the messages\n  useEffect(() => {\n    const pusher = new Pusher(\"908f2c6e588790ab9537\", {\n      cluster: \"ap2\",\n    });\n\n    const channel = pusher.subscribe(\"messages\");\n    channel.bind(\"inserted\", (data) => {\n      setMessages([...messages, data]);\n    });\n    return () => {\n      channel.unbind_all();\n      channel.unsubscribe();\n    };\n  }, [messages]);\n\n  //rooms fetcher\n  useEffect(() => {\n    axios.get(\"/rooms/sync\").then((res) => {\n      setRooms(res.data);\n    });\n  }, []);\n\n  //pusher for rooms inserted\n  useEffect(() => {\n    const pusher = new Pusher(\"908f2c6e588790ab9537\", {\n      cluster: \"ap2\",\n    });\n\n    const channel = pusher.subscribe(\"rooms\");\n    channel.bind(\"inserted\", (data) => {\n      setRooms([...rooms, data]);\n    });\n    return () => {\n      channel.unbind_all();\n      channel.unsubscribe();\n    };\n  }, [rooms]);\n\n  return (\n    <Router>\n      {user ? (\n        <Switch>\n          <Route exact path=\"/\">\n            <Header />\n            <div className=\"app\">\n              <div className=\"app_body\">\n                <Sidebar rooms={rooms} user={user} />\n              </div>\n            </div>\n          </Route>\n          <Route path=\"/room/:roomid\">\n            <Header />\n            <div className=\"app\">\n              <div className=\"app_body\">\n                <Sidebar rooms={rooms} user={user} setUser={setUser} />\n                <Chatbody messages={messages} user={user} />\n              </div>\n            </div>\n          </Route>\n        </Switch>\n      ) : (\n        <Login setUser={setUser} />\n      )}\n    </Router>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.Fragment>\n    <App />\n  </React.Fragment>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}